<div class="about-container">
  <!-- Header Section -->
  <div class="about-header">
    <div class="header-icon">
      <mat-icon>assignment</mat-icon>
    </div>
    <div class="header-text">
      <h1>Gestión de Tareas</h1>
      <p>Organiza, prioriza y gestiona tus tareas de manera eficiente con nuestro sistema inteligente de gestión de proyectos</p>
    </div>
    <div class="header-stats">
      <div class="header-stat">
        <mat-icon>trending_up</mat-icon>
        <span>Productividad</span>
      </div>
      <div class="header-stat">
        <mat-icon>group</mat-icon>
        <span>Colaboración</span>
      </div>
      <div class="header-stat">
        <mat-icon>analytics</mat-icon>
        <span>Análisis</span>
      </div>
    </div>
  </div>

  <!-- Tasks Overview -->
  <div class="tasks-overview">
    <div class="overview-header">
      <h2>Resumen de Tareas</h2>
      <p>Mantén el control total de tu flujo de trabajo</p>
    </div>
    <div class="overview-stats">
      <div class="stat-card not-started">
        <div class="stat-icon">
          <mat-icon>play_circle_outline</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-number">{{ taskStore.notStartedCount() }}</span>
          <span class="stat-label">Sin Iniciar</span>
          <div class="stat-progress">
            <div class="progress-bar" [style.width.%]="getProgressPercentage('not-started')"></div>
          </div>
        </div>
      </div>
      <div class="stat-card in-progress">
        <div class="stat-icon">
          <mat-icon>hourglass_empty</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-number">{{ taskStore.inProgressCount() }}</span>
          <span class="stat-label">En Progreso</span>
          <div class="stat-progress">
            <div class="progress-bar" [style.width.%]="getProgressPercentage('in-progress')"></div>
          </div>
        </div>
      </div>
      <div class="stat-card completed">
        <div class="stat-icon">
          <mat-icon>check_circle</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-number">{{ taskStore.completedCount() }}</span>
          <span class="stat-label">Terminadas</span>
          <div class="stat-progress">
            <div class="progress-bar" [style.width.%]="getProgressPercentage('completed')"></div>
          </div>
        </div>
      </div>
      <div class="stat-card assigned">
        <div class="stat-icon">
          <mat-icon>person</mat-icon>
        </div>
        <div class="stat-content">
          <span class="stat-number">{{ getAssignedTasksCount() }}</span>
          <span class="stat-label">Asignadas</span>
          <div class="stat-progress">
            <div class="progress-bar" [style.width.%]="getProgressPercentage('assigned')"></div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Additional Stats Row -->
    <div class="additional-stats">
      <div class="additional-stat-card">
        <mat-icon>schedule</mat-icon>
        <div class="stat-info">
          <span class="stat-value">{{ getTotalTasks() }}</span>
          <span class="stat-desc">Total Tareas</span>
        </div>
      </div>
      <div class="additional-stat-card">
        <mat-icon>priority_high</mat-icon>
        <div class="stat-info">
          <span class="stat-value">{{ getHighPriorityCount() }}</span>
          <span class="stat-desc">Alta Prioridad</span>
        </div>
      </div>
      <div class="additional-stat-card">
        <mat-icon>group</mat-icon>
        <div class="stat-info">
          <span class="stat-value">{{ getTeamMembersCount() }}</span>
          <span class="stat-desc">Miembros</span>
        </div>
      </div>
      <div class="additional-stat-card">
        <mat-icon>trending_up</mat-icon>
        <div class="stat-info">
          <span class="stat-value">{{ getCompletionRate() }}%</span>
          <span class="stat-desc">Completado</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Three Column Layout -->
  <div class="tasks-columns">
    <!-- Not Started Column -->
    <div class="task-column not-started-column">
      <mat-card class="column-header">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>play_circle_outline</mat-icon>
            Sin Iniciar
            <span class="task-count">({{ taskStore.notStartedCount() }})</span>
          </mat-card-title>
        </mat-card-header>
      </mat-card>
      
      <div class="tasks-list">
        @for (task of taskStore.notStartedTasks(); track task.id) {
          <mat-card class="task-card">
            <mat-card-content>
              <div class="task-header">
                <h3 class="task-title">{{ task.title }}</h3>
                <button mat-icon-button (click)="deleteTask(task.id)" class="delete-btn">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              
              @if (task.description) {
                <p class="task-description">{{ task.description }}</p>
              }
              
              <div class="task-controls">
                <div class="task-meta">
                  <span class="priority-chip priority-{{ task.priority }}">
                    <mat-icon>{{ getPriorityIcon(task.priority) }}</mat-icon>
                    {{ task.priority | titlecase }}
                  </span>
                  @if (task.assignee) {
                    <span class="assignee-chip">
                      <mat-icon class="assignee-icon">person</mat-icon>
                      {{ task.assignee }}
                    </span>
                  }
                  <div class="task-assignee-selector">
                    <app-assignee-selector
                      [selectedAssignee]="getTaskAssigneeSignal(task.id)"
                      [disabled]="getDisabledSignal()"
                      (assigneeChange)="updateAssignee(task.id, $event)">
                    </app-assignee-selector>
                  </div>
                </div>
                
                <div class="task-actions">
                  <div class="task-status">
                    <app-status-selector
                      [currentStatus]="getTaskStatusSignal(task.status)"
                      [disabled]="getDisabledSignal()"
                      (statusChange)="updateStatus(task.id, $event)">
                    </app-status-selector>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
        
        @if (taskStore.notStartedTasks().length === 0) {
          <div class="empty-state">
            <mat-icon>inbox</mat-icon>
            <p>No hay tareas sin iniciar</p>
          </div>
        }
      </div>
    </div>

    <!-- In Progress Column -->
    <div class="task-column in-progress-column">
      <mat-card class="column-header">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>hourglass_empty</mat-icon>
            En Progreso
            <span class="task-count">({{ taskStore.inProgressCount() }})</span>
          </mat-card-title>
        </mat-card-header>
      </mat-card>
      
      <div class="tasks-list">
        @for (task of taskStore.inProgressTasks(); track task.id) {
          <mat-card class="task-card">
            <mat-card-content>
              <div class="task-header">
                <h3 class="task-title">{{ task.title }}</h3>
                <button mat-icon-button (click)="deleteTask(task.id)" class="delete-btn">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              
              @if (task.description) {
                <p class="task-description">{{ task.description }}</p>
              }
              
              <div class="task-controls">
                <div class="task-meta">
                  <span class="priority-chip priority-{{ task.priority }}">
                    <mat-icon>{{ getPriorityIcon(task.priority) }}</mat-icon>
                    {{ task.priority | titlecase }}
                  </span>
                  @if (task.assignee) {
                    <span class="assignee-chip">
                      <mat-icon class="assignee-icon">person</mat-icon>
                      {{ task.assignee }}
                    </span>
                  }
                  <div class="task-assignee-selector">
                    <app-assignee-selector
                      [selectedAssignee]="getTaskAssigneeSignal(task.id)"
                      [disabled]="getDisabledSignal()"
                      (assigneeChange)="updateAssignee(task.id, $event)">
                    </app-assignee-selector>
                  </div>
                </div>
                
                <div class="task-actions">
                  <div class="task-status">
                    <app-status-selector
                      [currentStatus]="getTaskStatusSignal(task.status)"
                      [disabled]="getDisabledSignal()"
                      (statusChange)="updateStatus(task.id, $event)">
                    </app-status-selector>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
        
        @if (taskStore.inProgressTasks().length === 0) {
          <div class="empty-state">
            <mat-icon>work_outline</mat-icon>
            <p>No hay tareas en progreso</p>
          </div>
        }
      </div>
    </div>

    <!-- Completed Column -->
    <div class="task-column completed-column">
      <mat-card class="column-header">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>check_circle</mat-icon>
            Terminadas
            <span class="task-count">({{ taskStore.completedCount() }})</span>
          </mat-card-title>
        </mat-card-header>
      </mat-card>
      
      <div class="tasks-list">
        @for (task of taskStore.completedTasks(); track task.id) {
          <mat-card class="task-card">
            <mat-card-content>
              <div class="task-header">
                <h3 class="task-title completed">{{ task.title }}</h3>
                <button mat-icon-button (click)="deleteTask(task.id)" class="delete-btn">
                  <mat-icon>delete</mat-icon>
                </button>
              </div>
              
              @if (task.description) {
                <p class="task-description">{{ task.description }}</p>
              }
              
              <div class="task-controls">
                <div class="task-meta">
                  <span class="priority-chip priority-{{ task.priority }}">
                    <mat-icon>{{ getPriorityIcon(task.priority) }}</mat-icon>
                    {{ task.priority | titlecase }}
                  </span>
                  @if (task.assignee) {
                    <span class="assignee-chip">
                      <mat-icon class="assignee-icon">person</mat-icon>
                      {{ task.assignee }}
                    </span>
                  }
                  <div class="task-assignee-selector">
                    <app-assignee-selector
                      [selectedAssignee]="getTaskAssigneeSignal(task.id)"
                      [disabled]="getDisabledSignal()"
                      (assigneeChange)="updateAssignee(task.id, $event)">
                    </app-assignee-selector>
                  </div>
                </div>
                
                <div class="task-actions">
                  <div class="task-status">
                    <app-status-selector
                      [currentStatus]="getTaskStatusSignal(task.status)"
                      [disabled]="getDisabledSignal()"
                      (statusChange)="updateStatus(task.id, $event)">
                    </app-status-selector>
                  </div>
                </div>
              </div>
            </mat-card-content>
          </mat-card>
        }
        
        @if (taskStore.completedTasks().length === 0) {
          <div class="empty-state">
            <mat-icon>task_alt</mat-icon>
            <p>No hay tareas terminadas</p>
          </div>
        }
      </div>
    </div>
  </div>
</div>
